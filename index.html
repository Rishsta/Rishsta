<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Rishsta | ุฑูุดุณุชุง</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="phone-frame">
        <div class="profile-container">
            <div class="profile-picture">
                <img src="photo_2025-11-10_16-46-23.jpg" alt="Rishsta Logo"> 
            </div>
            <h1>Rishsta</h1>
            <div class="description-text"><p>ุฃูุฑุงุญูู ุชุจุฏุฃ ูุน ุฑูุดุณุชุง</p></div>
            
            <div class="social-buttons-group">
                <a href="https://www.tiktok.com/@rishsta" target="_blank" class="social-button tiktok-btn">
                    <i class="fab fa-tiktok"></i><span>TikTok</span>
                </a>
                <a href="https://www.snapchat.com/add/RISHSTA-1" target="_blank" class="social-button snapchat-btn">
                    <i class="fab fa-snapchat-ghost"></i><span>Snapchat</span>
                </a>
                <a href="https://wa.me/966545998016" target="_blank" class="social-button whatsapp-btn whatsapp1">
                    <i class="fab fa-whatsapp"></i><span>WhatsApp</span>
                </a>
            </div>

            <div class="extra-button-group">
                <a href="#" class="main-booking-button" onclick="openBookingModal()">
                    ๐ ุงุจุฏุฃ ุญุฌุฒ ุงูุจุงูุงุช ูุงูุฎุฏูุงุช ุงูุขู
                </a>
            </div>
        </div>
    </div>
    
    <div id="bookingModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeBookingModal()">ร</span>
            
            <div class="step-indicator">
                <span class="step-dot active">1</span>
                <span class="step-line"></span>
                <span class="step-dot">2</span>
                <span class="step-line"></span>
                <span class="step-dot">3</span>
            </div>

            <form id="bookingForm">
                
                <div class="form-step active" id="step1">
                    <h2>๐ ุงูุฎุทูุฉ 1: ุจูุงูุงุช ุงูุญุฌุฒ</h2>
                    <p style="font-size: 0.9em; color: #666;">ุงูุฑุฌุงุก ุชุนุจุฆุฉ ูุนูููุงุชู ููููุน ุงูููุงุณุจุฉ.</p>
                    
                    <label>ุงูุงุณู ุงููุงูู:</label>
                    <input type="text" id="clientName" required>

                    <label>ุฑูู ุงูุฌูุงู:</label>
                    <input type="tel" id="clientPhone" placeholder="05xxxxxxxx" dir="ltr" style="text-align: right;" required>
                    
                    <input type="hidden" id="emailInput" value="s202341370@kfupm.edu.sa">

                    <label>ููุน ุงูููุงุณุจุฉ:</label>
                    <input type="text" id="eventType" placeholder="ูุซุงู: ุฒูุงุฌุ ุชุฎุฑุฌ..." required>

                    <label>ูููุน ุงูููุงุณุจุฉ (ุงุณู ุงููุงุนุฉ):</label>
                    <input type="text" id="eventLocationName" required>
                    
                    <label>ุงูุชุงุฑูุฎ:</label>
                    <input type="date" id="eventDate" required>
                    <p id="availabilityStatus" style="font-weight: bold; margin-top: 5px; font-size: 0.8em;"></p>

                    <div class="nav-buttons">
                        <button type="button" class="next-btn" onclick="nextStep(2)">ุงูุชุงูู โฌ</button>
                    </div>
                </div>

                <div class="form-step" id="step2">
                    <h2>๐๏ธ ุงูุฎุทูุฉ 2: ุงุฎุชุฑ ุงูุฎุฏูุงุช</h2>
                    <p style="font-size: 0.9em; color: #666;">ุญุฏุฏ ุงูุฎุฏูุงุช ุงูุชู ุชุฑุบุจ ุจุญุฌุฒูุง:</p>
                    
                    <div class="services-selection">
                        <div class="service-option">
                            <input type="checkbox" id="service1" name="service" value="ุถูุงูุฉ ุฑูุดุณุชุง">
                            <label for="service1">โจ ุถูุงูุฉ ุฑูุดุณุชุง ุงูุฃูููุฉ</label>
                        </div>
                        <div class="service-option">
                            <input type="checkbox" id="service2" name="service" value="ุจูููู ูููุน">
                            <label for="service2">๐ฝ๏ธ ุจูููู ุฑูุดุณุชุง ุงููุชูุงูู</label>
                        </div>
                        <div class="service-option">
                            <input type="checkbox" id="service3" name="service" value="ุชุฑุชูุจ ุตูุงูู ุงูุนุดุงุก">
                            <label for="service3">๐ด ุชุฑุชูุจ ุตูุงูู ุงูุนุดุงุก</label>
                        </div>
                    </div>

                    <div class="nav-buttons">
                        <button type="button" class="prev-btn" onclick="prevStep(1)">โก ุงูุณุงุจู</button>
                        <button type="button" class="next-btn" onclick="validateAndGoToStep3()">ุงูุชุงูู โฌ</button>
                    </div>
                </div>

                <div class="form-step" id="step3">
                    <h2>๐ฆ ุงูุฎุทูุฉ 3: ุชูุงุตูู ุงูุจุงูุงุช</h2>
                    
                    <p style="color: red; font-weight: bold; font-size: 0.8em; margin-bottom: 10px;">* ููุงุญุธุฉ: ูุฏุฉ ุชูุงุฌุฏ ุงูููุงุฏุฑ 6 ุณุงุนุงุช.</p>

                    <div id="dynamicOptionsContainer"></div>

                    <hr>
                    <h3 style="text-align: center; color: #333;">ุงูุฅุฌูุงูู ุงูุชูุฏูุฑู: <span id="totalPrice" style="color: #ff9900;">0</span> ุฑ.ุณ</h3>
                    
                    <div class="nav-buttons">
                        <button type="button" class="prev-btn" onclick="prevStep(2)">โก ุงูุณุงุจู</button>
                        <button type="button" class="submit-btn" onclick="confirmBooking()">ุฅุฑุณุงู ุงูุทูุจ ูุงุชุณุงุจ โ</button>
                    </div>
                </div>

            </form>
        </div>
    </div>

    <script>
        const bookingModal = document.getElementById('bookingModal');
        const totalElement = document.getElementById('totalPrice');
        const dynamicOptionsContainer = document.getElementById('dynamicOptionsContainer');
        const WEBHOOK_URL = 'https://hook.us2.make.com/2sbytwqqg9mqm0dy1jjdltumrer3t5ki';
        const HIDDEN_ADMIN_EMAIL = 's202341370@kfupm.edu.sa';

        const PRICES = {
            service2Base: 3700, service3Base: 1200, 
            extraWater: 11, extraBaklava: 150, extraDatesSweet: 120,
            extraStaff: 150, extraBuffet100: 500, extraFruit: 200, 
        };

        function openBookingModal() {
            bookingModal.style.display = 'block';
            document.body.style.overflow = 'hidden';
            showStep(1); 
        }

        function closeBookingModal() {
            bookingModal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function showStep(stepNumber) {
            document.querySelectorAll('.form-step').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.step-dot').forEach(el => el.classList.remove('active'));
            document.getElementById('step' + stepNumber).classList.add('active');
            for (let i = 1; i <= stepNumber; i++) {
                document.querySelectorAll('.step-dot')[i-1].classList.add('active');
            }
        }

        function nextStep(targetStep) {
            if (targetStep === 2) {
                const name = document.getElementById('clientName').value;
                const phone = document.getElementById('clientPhone').value;
                const date = document.getElementById('eventDate').value;
                const loc = document.getElementById('eventLocationName').value;
                if (!name || !phone || !date || !loc) {
                    alert("ุงูุฑุฌุงุก ุชุนุจุฆุฉ ุฌููุน ุงูุญููู ุงููุทููุจุฉ.");
                    return;
                }
                checkDateAvailability(); 
            }
            showStep(targetStep);
        }

        function prevStep(targetStep) {
            showStep(targetStep);
        }

        function validateAndGoToStep3() {
            const s1 = document.getElementById('service1').checked;
            const s2 = document.getElementById('service2').checked;
            const s3 = document.getElementById('service3').checked;

            if (!s1 && !s2 && !s3) {
                alert("ุงูุฑุฌุงุก ุงุฎุชูุงุฑ ุฎุฏูุฉ ูุงุญุฏุฉ ุนูู ุงูุฃูู ูููุชุงุจุนุฉ.");
                return;
            }
            renderStep3Content();
            showStep(3);
        }

        function renderStep3Content() {
            let html = '';
            if (document.getElementById('service1').checked) html += generateService1HTML();
            if (document.getElementById('service2').checked) html += generateService2HTML();
            if (document.getElementById('service3').checked) html += generateService3HTML();
            
            dynamicOptionsContainer.innerHTML = html;
            
            const inputs = dynamicOptionsContainer.querySelectorAll('input');
            inputs.forEach(input => {
                input.addEventListener('change', calculateTotal);
                input.addEventListener('input', calculateTotal);
            });
            calculateTotal(); 
        }

        // --- ุชุนุฏูู ุงููุงุฆูุฉ ูุชููู ุนููุฏูุฉ (ุชุญุช ุจุนุถ) ---
        function generateService1HTML() {
            return `
            <fieldset class="service-fieldset">
                <legend>โจ ุถูุงูุฉ ุฑูุดุณุชุง</legend>
                <div style="margin-bottom: 15px;">
                    <label style="margin-bottom: 10px; display:block;">ุงุฎุชุฑ ุงูุจุงูุฉ ุงูููุงุณุจุฉ:</label>
                    
                    <div class="package-box">
                        <input type="radio" id="p1" name="pkg1" value="ุงูุจุงูุฉ ุงูุนุงุฏูุฉ" data-price="800" data-staff="3" required>
                        <label for="p1" class="pkg-title">ุงูุจุงูุฉ ุงูุนุงุฏูุฉ (800 ุฑ.ุณ)</label>
                        <ul class="vertical-list">
                            <li>โ ูููุฉ ุนุฑุจูุฉ</li>
                            <li>๐ต ุดุงู</li>
                            <li>๐ฟ ูุนูุงุน</li>
                            <li>๐ด ุชูุฑ + ุทุญูููุฉ</li>
                            <li>๐ฅ 3 ููุงุฏุฑ</li>
                            <li>๐ฅ ุงููุญู ุนูููุง ูุงูุนูุฏ ุนููู</li>
                        </ul>
                    </div>

                    <div class="package-box">
                        <input type="radio" id="p2" name="pkg1" value="ุงูุจุงูุฉ ุงููุชูุณุทุฉ" data-price="1000" data-staff="4" required>
                        <label for="p2" class="pkg-title">ุงูุจุงูุฉ ุงููุชูุณุทุฉ (1000 ุฑ.ุณ)</label>
                        <ul class="vertical-list">
                            <li>โ ูููุฉ ุนุฑุจูุฉ</li>
                            <li>๐ต ุดุงู ูุงุฎุฑ</li>
                            <li>๐ ููููู ุฃุณูุฏ</li>
                            <li>๐บ ูุฑูุฏูู (ุญุงุฑ/ุจุงุฑุฏ)</li>
                            <li>๐ฟ ูุนูุงุน</li>
                            <li>๐ด ุชูุฑ ุนุงุฏู + ุชูุฑ ุจุงูุณูุณู + ุทุญูููุฉ</li>
                            <li>๐ฅ 4 ููุงุฏุฑ</li>
                            <li>๐ฅ ุงููุญู ูุงูุนูุฏ ุนูููุง</li>
                        </ul>
                    </div>

                    <div class="package-box">
                        <input type="radio" id="p3" name="pkg1" value="ุงูุจุงูุฉ ุงููุฎูุฉ" data-price="1200" data-staff="5" required>
                        <label for="p3" class="pkg-title">ุงูุจุงูุฉ ุงููุฎูุฉ (1200 ุฑ.ุณ)</label>
                        <ul class="vertical-list">
                            <li>โ ุฌููุน ูุดุฑูุจุงุช ุงูุจุงูุฉ ุงููุชูุณุทุฉ</li>
                            <li>๐ซ ููุช ุดููููุช</li>
                            <li>๐ฎ ูุงุณุชุฑ</li>
                            <li>๐ด ุชูุฑ ูุญุดู + ุชูุฑ ุจุงูุณูุณู ูุงูุญููุฉ + ุทุญูููุฉ</li>
                            <li>๐ฅ 5 ููุงุฏุฑ</li>
                            <li>๐ฅ ุงููุญู ูุงูุนูุฏ ุนูููุง</li>
                        </ul>
                    </div>
                </div>
                
                <div class="extras-box">
                    <label>ุฅุถุงูุงุช:</label><br>
                    <div class="extra-item"><input type="number" id="extraWater1" min="0" value="0" dir="ltr"> <span>ูุงุก (+${PRICES.extraWater})</span></div>
                    <div class="extra-item"><input type="number" id="extraBaklava1" min="0" value="0" dir="ltr"> <span>ุจููุงูุฉ (+${PRICES.extraBaklava})</span></div>
                    <div class="extra-item"><input type="number" id="extraDatesSweet1" min="0" value="0" dir="ltr"> <span>ุญูู ุชูุฑ (+${PRICES.extraDatesSweet})</span></div>
                    <div class="extra-item"><input type="number" id="extraStaff1" min="0" value="0" dir="ltr"> <span>ูุงุฏุฑ ุฅุถุงูู (+${PRICES.extraStaff})</span></div>
                </div>
            </fieldset>`;
        }

        function generateService2HTML() {
            return `
            <fieldset class="service-fieldset">
                <legend>๐ฝ๏ธ ุจูููู ุฑูุดุณุชุง (3700 ุฑ.ุณ)</legend>
                <ul class="vertical-list" style="margin-bottom:15px;">
                    <li>๐ 3 ุฃุตูุงู ุฑุฆูุณูุฉ ูุชููุนุฉ</li>
                    <li>๐ฅ ูุนุฌูุงุช ูุดููุฉ + ููุจูุฉ + ุณูุจูุณุฉ</li>
                    <li>๐ฐ ููู + ููุงูุฉ + ุจููุงูุฉ</li>
                    <li>๐ฅ ููุณุฑุงุช + ูุฑู ุนูุจ + ุฐุฑุฉ + ุจูููุฉ</li>
                    <li>๐น ููููุชู + ุนุตูุฑ ูุงูุฌู</li>
                    <li>๐ฅ 3 ููุงุฏุฑ</li>
                </ul>
                <div class="extras-box">
                    <div class="extra-item"><input type="number" id="extraGuests2" min="0" value="0" dir="ltr"> <span>ููู 100 ุดุฎุต ุฒูุงุฏุฉ (+${PRICES.extraBuffet100})</span></div>
                    <div class="extra-item"><input type="number" id="extraWater2" min="0" value="0" dir="ltr"> <span>ูุงุก (+${PRICES.extraWater})</span></div>
                    <div class="extra-item"><input type="number" id="extraFruit2" min="0" value="0" dir="ltr"> <span>ููุงูู (+${PRICES.extraFruit})</span></div>
                    <div class="extra-item"><input type="number" id="extraStaff2" min="0" value="0" dir="ltr"> <span>ูุงุฏุฑ ุฅุถุงูู (+${PRICES.extraStaff})</span></div>
                </div>
            </fieldset>`;
        }

        function generateService3HTML() {
            return `
            <fieldset class="service-fieldset">
                <legend>๐ด ุชุฑุชูุจ ุตูุงูู ุงูุนุดุงุก (1200 ุฑ.ุณ)</legend>
                 <ul class="vertical-list" style="margin-bottom:15px;">
                    <li>๐ฅ 7 ููุงุฏุฑ ูุชุฎุตุตูู</li>
                    <li>๐ฝ๏ธ ุชุฑุชูุจ ูุชูุฏูู ุงุญุชุฑุงูู</li>
                </ul>
                <div style="margin-bottom: 10px;">
                    <input type="number" id="numTrays3" placeholder="ุนุฏุฏ ุงูุฏูุนุงุช" dir="ltr" style="width:45%; display:inline-block;">
                    <input type="number" id="numPlates3" placeholder="ุนุฏุฏ ุงูุตูุงูู" dir="ltr" style="width:45%; display:inline-block;">
                    <input type="time" id="startTime3" style="width:100%; margin-top:5px;">
                </div>
                <div class="extras-box">
                     <div class="extra-item"><input type="checkbox" id="genderSplit3"> <label for="genderSplit3">ูุณููู (ุฑุฌุงู/ูุณุงุก)</label></div>
                     <div class="extra-item"><input type="number" id="numChairs3" min="0" value="0" dir="ltr"> <span>ูุฑุงุณู ููุตูููุฉ</span></div>
                     <div class="extra-item"><input type="number" id="extraStaff3" min="0" value="0" dir="ltr"> <span>ูุงุฏุฑ ุฅุถุงูู (+${PRICES.extraStaff})</span></div>
                </div>
            </fieldset>`;
        }

        function calculateTotal() {
            let currentTotal = 0;
            let details = [];

            if (document.getElementById('service1').checked) {
                const pkg = document.querySelector('input[name="pkg1"]:checked');
                if (pkg) {
                    let p = parseFloat(pkg.dataset.price);
                    currentTotal += p;
                    details.push(`ุถูุงูุฉ: ${pkg.value} (${p} ุฑ.ุณ)`);
                }
                currentTotal += safeCalc('extraWater1', PRICES.extraWater, details, 'ูุงุก');
                currentTotal += safeCalc('extraBaklava1', PRICES.extraBaklava, details, 'ุจููุงูุฉ');
                currentTotal += safeCalc('extraDatesSweet1', PRICES.extraDatesSweet, details, 'ุญูู ุชูุฑ');
                currentTotal += safeCalc('extraStaff1', PRICES.extraStaff, details, 'ูุงุฏุฑ ุถูุงูุฉ');
            }

            if (document.getElementById('service2').checked) {
                currentTotal += PRICES.service2Base;
                details.push(`ุจูููู: ุฃุณุงุณู (${PRICES.service2Base} ุฑ.ุณ)`);
                currentTotal += safeCalc('extraGuests2', PRICES.extraBuffet100, details, 'ุฒูุงุฏุฉ 100 ุดุฎุต');
                currentTotal += safeCalc('extraWater2', PRICES.extraWater, details, 'ูุงุก ุจูููู');
                currentTotal += safeCalc('extraFruit2', PRICES.extraFruit, details, 'ููุงูู');
                currentTotal += safeCalc('extraStaff2', PRICES.extraStaff, details, 'ูุงุฏุฑ ุจูููู');
            }

            if (document.getElementById('service3').checked) {
                currentTotal += PRICES.service3Base;
                details.push(`ุตูุงูู: ุฃุณุงุณู (${PRICES.service3Base} ุฑ.ุณ)`);
                currentTotal += safeCalc('extraStaff3', PRICES.extraStaff, details, 'ูุงุฏุฑ ุตูุงูู');
            }

            totalElement.textContent = currentTotal.toLocaleString();
            return { total: currentTotal, details: details };
        }

        function safeCalc(id, price, list, name) {
            const el = document.getElementById(id);
            if (el && el.value > 0) {
                let qty = parseInt(el.value);
                list.push(`+ ${qty} ${name}`);
                return qty * price;
            }
            return 0;
        }

        function collectData() {
            const calc = calculateTotal();
            const services = [];
            if(document.getElementById('service1').checked) services.push('ุถูุงูุฉ');
            if(document.getElementById('service2').checked) services.push('ุจูููู');
            if(document.getElementById('service3').checked) services.push('ุตูุงูู');

            return {
                clientName: document.getElementById('clientName').value,
                clientPhone: document.getElementById('clientPhone').value,
                adminEmail: HIDDEN_ADMIN_EMAIL,
                eventDate: document.getElementById('eventDate').value,
                eventType: document.getElementById('eventType').value,
                eventLocation: document.getElementById('eventLocationName').value,
                totalPrice: calc.total,
                finalPriceText: calc.total + ' ุฑ.ุณ',
                selectedServices: services.join(', '),
                detailedBreakdown: calc.details.join('\n- ')
            };
        }

        async function sendToNotion(data) {
            try {
                await fetch(WEBHOOK_URL, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(data)
                });
            } catch(e) { console.error(e); }
        }

        async function confirmBooking() {
            if (document.getElementById('service1').checked && !document.querySelector('input[name="pkg1"]:checked')) {
                alert("ุงูุฑุฌุงุก ุงุฎุชูุงุฑ ููุน ุจุงูุฉ ุงูุถูุงูุฉ.");
                return;
            }
            
            if (document.getElementById('service1').checked) {
                 const b = document.getElementById('extraBaklava1');
                 const d = document.getElementById('extraDatesSweet1');
                 if (b && d && b.value == 0 && d.value == 0) {
                     if (!confirm("โจ ูู ุชูุฏ ุฅุถุงูุฉ ุญูู ูุถูููู ูุฒูุงุฏุฉ ุงููุฎุงูุฉุ\nุงุถุบุท 'ุฅูุบุงุก' ููุฅุถุงูุฉุ ุฃู 'ููุงูู' ูููุชุงุจุนุฉ.")) return;
                 }
            }

            const data = collectData();
            const msg = `ููุฎุต ุงูุทูุจ:\nุงูุงุณู: ${data.clientName}\nุงูุชุงุฑูุฎ: ${data.eventDate}\n\nุงูุฎุฏูุงุช:\n- ${data.detailedBreakdown}\n\nุงูุฅุฌูุงูู: ${data.finalPriceText}\n\nูู ุชุฑูุฏ ุงุนุชูุงุฏ ุงูุทูุจุ`;
            if(!confirm(msg)) return;

            sendToNotion(data);
            
            let waMsg = `*ุญุฌุฒ ุฌุฏูุฏ - ุฑูุดุณุชุง*\n๐ค ${data.clientName}\n๐ ${data.clientPhone}\n๐ ${data.eventDate}\n๐ ${data.eventLocation}\n\n*ุงูุชูุงุตูู:*\n- ${data.detailedBreakdown}\n\n*ุงูุฅุฌูุงูู: ${data.finalPriceText}*`;
            
            window.open(`https://wa.me/966544512811?text=${encodeURIComponent(waMsg)}`, '_blank');
            closeBookingModal();
        }
        
        function checkDateAvailability() {
             document.getElementById('availabilityStatus').innerText = "โ ุงูุชุงุฑูุฎ ูุชุงุญ ูุจุฏุฆูุงู";
             document.getElementById('availabilityStatus').style.color = "green";
        }
    </script>
</body>
</html>
